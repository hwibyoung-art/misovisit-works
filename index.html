<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ì†Œë°©ë¬¸ ê´€í•  êµ¬ì—­ ë° í”Œë˜ë„ˆ í˜„í™©</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { margin: 0; padding: 0; font-family: 'Noto Sans KR', sans-serif; }
        #map { width: 100%; height: 100vh; background: #f5f5f5; }
        
        /* êµ¬ì—­ ë¼ë²¨ ìŠ¤íƒ€ì¼ */
        .district-label {
            background: rgba(255, 255, 255, 0.4);
            border: none;
            box-shadow: none;
            font-size: 10px;
            color: #555;
            text-align: center;
            border-radius: 4px;
            padding: 1px;
            font-weight: normal;
        }

        /* í”Œë˜ë„ˆ ë¼ë²¨ ìŠ¤íƒ€ì¼ */
        .planner-label {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid white;
            color: white;
            font-size: 12px;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 20px;
            white-space: nowrap;
        }
        .planner-label::before {
            display: none; 
        }
        
        /* ë²”ë¡€ ìŠ¤íƒ€ì¼ */
        .legend {
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            line-height: 1.6;
            font-size: 12px;
        }
        .legend i {
            width: 15px;
            height: 15px;
            float: left;
            margin-right: 8px;
            opacity: 0.8;
            border-radius: 3px;
        }
    </style>
</head>
<body>

<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // 1. ì§€ë„ ì´ˆê¸°í™”
    var map = L.map('map', {
        zoomControl: true,
        attributionControl: false
    }).setView([37.5350, 126.9800], 11); 

    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        maxZoom: 20,
        subdomains: 'abcd'
    }).addTo(map);

    // ==========================================
    // 2. ë°ì´í„° ì •ì˜
    // ==========================================
    
    // [êµ¬ì—­ ë°ì´í„°]
    const zoneData = {
        "ê°•ì„œêµ¬": "1-A", "ì–‘ì²œêµ¬": "1-B", "êµ¬ë¡œêµ¬": "1-C", "ì˜ë“±í¬êµ¬": "1-D",
        "ë™ì‘êµ¬": "2-A", "ê´€ì•…êµ¬": "2-B", "ê¸ˆì²œêµ¬": "2-C",
        "ì„œì´ˆêµ¬": "3-A", "ê°•ë‚¨êµ¬": "3-B",
        "ì†¡íŒŒêµ¬": "4-A", "ê°•ë™êµ¬": "4-B",
        "ì„±ë™êµ¬": "5-A", "ê´‘ì§„êµ¬": "5-B", "ì¤‘ë‘êµ¬": "5-C", "ë™ëŒ€ë¬¸êµ¬": "5-D",
        "ì¢…ë¡œêµ¬": "6-A", "ì¤‘êµ¬": "6-B", "ìš©ì‚°êµ¬": "6-C",
        "ì€í‰êµ¬": "7-A", "ì„œëŒ€ë¬¸êµ¬": "7-B", "ë§ˆí¬êµ¬": "7-C",
        "ì„±ë¶êµ¬": "8-A", "ê°•ë¶êµ¬": "8-B", "ë„ë´‰êµ¬": "8-C", "ë…¸ì›êµ¬": "8-D"
    };

    // [í”Œë˜ë„ˆ ë°ì´í„°] 
    const planners = [
        { name: "ì´ì˜ì¤€", lat: 37.4920, lng: 127.0780, desc: "ê°•ë‚¨êµ¬ (ëŒ€ì²­ì•„íŒŒíŠ¸)" },
        { name: "ë°•ì£¼í¬", lat: 37.4665, lng: 126.8965, desc: "ê¸ˆì²œêµ¬ ì‹œí¥ëŒ€ë¡œ" },
        { name: "ë°•ì›ì£¼", lat: 37.4895, lng: 126.9960, desc: "ì„œì´ˆêµ¬ ë°©ë°°ë™" },
        { name: "í•˜ì€ì •", lat: 37.5285, lng: 126.9950, desc: "ìš©ì‚°êµ¬ ë…¹ì‚¬í‰ëŒ€ë¡œ" },
        { name: "ì•ˆí˜¸ì •", lat: 37.5675, lng: 127.0035, desc: "ì¤‘êµ¬ í›ˆë ¨ì›ê³µì›" },
        { name: "ê¹€ìœ¤ê²½", lat: 37.5791, lng: 126.9368, desc: "ì„œëŒ€ë¬¸êµ¬" },
        { name: "ê¹€ì¼ì‹ ", lat: 37.5509, lng: 126.8495, desc: "ê°•ì„œêµ¬" },
        { name: "ì´ë¯¼ì•„", lat: 37.5610, lng: 126.8350, desc: "ê°•ì„œêµ¬ (ê±°ì£¼:ê³ ì–‘)" },
        { name: "ì •ì¤€í˜", lat: 37.5245, lng: 126.8320, desc: "ì–‘ì²œêµ¬ ì‹ ì›”ë™" }
    ];

    // ==========================================
    // 3. í•¨ìˆ˜ ë° ë¡œì§
    // ==========================================

    function getColor(zoneCode) {
        if (!zoneCode) return '#CCCCCC';
        const mainZone = zoneCode.split('-')[0];
        switch (mainZone) {
            case '1': return '#FF5733';
            case '2': return '#C70039';
            case '3': return '#900C3F';
            case '4': return '#581845';
            case '5': return '#28B463';
            case '6': return '#2E86C1';
            case '7': return '#17A589';
            case '8': return '#D4AC0D';
            default: return '#999999';
        }
    }

    function style(feature) {
        const districtName = feature.properties.name;
        const zoneCode = zoneData[districtName];
        return {
            fillColor: getColor(zoneCode),
            weight: 1,
            opacity: 1,
            color: 'white',
            dashArray: '3',
            fillOpacity: 0.4
        };
    }

    fetch('https://raw.githubusercontent.com/southkorea/seoul-maps/master/kostat/2013/json/seoul_municipalities_geo_simple.json')
        .then(response => response.json())
        .then(data => {
            const geoJsonLayer = L.geoJson(data, {
                style: style,
                onEachFeature: function(feature, layer) {
                    const districtName = feature.properties.name;
                    const zoneCode = zoneData[districtName] || "";
                    if (zoneCode) {
                        layer.bindTooltip(
                            `<div>${districtName} <br><b>${zoneCode}</b></div>`, 
                            { permanent: true, direction: "center", className: "district-label" }
                        ).openTooltip();
                    }
                }
            }).addTo(map);
        });

    var plannerIcon = L.divIcon({
        className: 'custom-div-icon',
        html: "<div style='font-size:24px; text-shadow: 2px 2px 2px white;'>ğŸ§‘â€ğŸ’¼</div>",
        iconSize: [30, 42],
        iconAnchor: [15, 42]
    });

    planners.forEach(function(p) {
        var marker = L.marker([p.lat, p.lng], {icon: plannerIcon}).addTo(map);
        
        marker.bindTooltip(p.name, {
            permanent: true,
            direction: 'bottom',
            className: 'planner-label',
            offset: [0, 5]
        }).openTooltip();

        marker.bindPopup(`<b>${p.name} í”Œë˜ë„ˆ</b><br>${p.desc}`);
    });

    var legend = L.control({position: 'bottomright'});
    legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<strong>ë²”ë¡€</strong><br>';
        div.innerHTML += '<div style="margin-bottom:5px;">ğŸ§‘â€ğŸ’¼ í”Œë˜ë„ˆ ê±°ì£¼ì§€</div>';
        for (var i = 1; i <= 8; i++) {
            div.innerHTML += '<i style="background:' + getColor(i.toString()) + '"></i> ' + i + ' ê¶Œì—­<br>';
        }
        return div;
    };
    legend.addTo(map);

</script>
</body>
</html>